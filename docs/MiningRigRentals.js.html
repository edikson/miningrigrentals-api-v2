

<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
      MiningRigRentals.js - Documentation
  </title>

  <link href="https://www.braintreepayments.com/images/favicon-ccda0b14.png" rel="icon" type="image/png">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.3.0/highlightjs-line-numbers.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

  <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
  <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
  <link type="text/css" rel="stylesheet" href="styles/monokai-sublime.css">

  

  <!-- start Mixpanel -->
  <script type="text/javascript">(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("1919205b2da72e4da3b9b6639b444d59");</script>
  <!-- end Mixpanel -->
</head>

<body>
  <svg style="display: none;">
    <defs>
      <symbol id="linkIcon" fill="#706d77" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 0h24v24H0z" fill="none"/>
          <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
      </symbol>
    </defs>
  </svg>

  <input type="checkbox" id="nav-trigger" class="nav-trigger" />
  <label for="nav-trigger" class="navicon-button x">
    <div class="navicon"></div>
  </label>

  <label for="nav-trigger" class="overlay"></label>

  <div class="top-nav-wrapper">
    <ul>
      <li >
        <a href="index.html">
          
            <svg fill="#6D6D6D" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
              <path d="M0 0h24v24H0z" fill="none"/>
            </svg>
          
          
        </a>
      </li>

      

    </ul>
  </div>

  <nav>
    <h3 class="reference-title">
      MiningRigRentals API V2
    </h3>

    <h3>Classes</h3><ul><li id="MiningRigRentals-nav"><a href="MiningRigRentals.html">MiningRigRentals</a><ul class='methods'><li data-type="method" id="MiningRigRentals-createHMACSignature-nav"><a href="MiningRigRentals.html#createHMACSignature">createHMACSignature</a></li><li data-type="method" id="MiningRigRentals-generateNonce-nav"><a href="MiningRigRentals.html#generateNonce">generateNonce</a></li><li data-type="method" id="MiningRigRentals-getAlgo-nav"><a href="MiningRigRentals.html#getAlgo">getAlgo</a></li><li data-type="method" id="MiningRigRentals-getAlgos-nav"><a href="MiningRigRentals.html#getAlgos">getAlgos</a></li><li data-type="method" id="MiningRigRentals-getMyRigs-nav"><a href="MiningRigRentals.html#getMyRigs">getMyRigs</a></li><li data-type="method" id="MiningRigRentals-getRental-nav"><a href="MiningRigRentals.html#getRental">getRental</a></li><li data-type="method" id="MiningRigRentals-getRig-nav"><a href="MiningRigRentals.html#getRig">getRig</a></li><li data-type="method" id="MiningRigRentals-getServers-nav"><a href="MiningRigRentals.html#getServers">getServers</a></li><li data-type="method" id="MiningRigRentals-initAPI-nav"><a href="MiningRigRentals.html#initAPI">initAPI</a></li><li data-type="method" id="MiningRigRentals-whoami-nav"><a href="MiningRigRentals.html#whoami">whoami</a></li></ul></li></ul><h3 id="global-nav">Global</h3><ul><li><a href="global.html#v1">v1</a></li></ul>
  </nav>

  <div id="main">
    
      <h1 class="page-title">
        MiningRigRentals.js
      </h1>
    

    
      

<section>
  <article>
    <pre class="prettyprint source linenums"><code>import axios from 'axios';
import crypto from 'crypto';

/**
 An importable Javascript class to make REST requests to the MiningRigRentals API
 */
const v1 = 'v1';
const v2 = 'v2';
class MiningRigRentals {
	/**
	 * Create a new MiningRigRentals class from the constructor using your MRR api key and secret
	 * @param {Object} apiSettings
	 * @param {string} apiSettings.key - mining rig rentals api key
	 * @param {string} apiSettings.secret - mining rig rentals api secret
	 */
	constructor(apiSettings) {
		this.baseURL = 'https://www.miningrigrentals.com/api/';

		if (apiSettings &amp;&amp; apiSettings.key &amp;&amp; apiSettings.secret) {
			this.key = apiSettings.key;
			this.secret = apiSettings.secret;
			this.prevNonce = (new Date().getTime())
		}
	}
	/* ------------ Information API ----------- */
	/**
	 * Test connectivity and return information about you
	 * @returns {Promise&lt;Object>}
	 */
	 async whoami() {
		let endpoint = '/whoami';
		let api = this.initAPI(endpoint);
		try {
			return (await api.get(endpoint)).data;
		} catch (err) {
			throw this.createError(endpoint, 'GET', err)
		}
	};
	/**
	 * Get a list of MRR rig servers
	 * @returns {Promise&lt;Object>}
	 */
	async getServers() {
		let endpoint = '/info/servers';
		let api = this.initAPI(endpoint);
		try {
			return (await api.get(endpoint)).data;
		} catch (err) {
			throw this.createError(endpoint, 'GET', err)
		}
	};

	/**
	 * Get all algos and statistics for them (suggested price, unit information, current rented hash/etc)
	 * @param {string} [currency='BTC'] - Currency to use for price info *Ticker. Options: BTC, ETH, LTC, DASH
	 * @returns {Promise&lt;Object>}
	 */
	async getAlgos(currency) {
		let endpoint = `/info/algos`, params;
		if (currency) {
			params = {
				currency: currency
			}
		}
		let api = this.initAPI(endpoint, params);
		try {
			return (await api.get(endpoint)).data;
		} catch (err) {
			throw this.createError(endpoint, 'GET', err)
		}
	};
	/**
	 *
	 * @param {string} algo - the name of the algorithm you wish to search by. Ex: 'scrypt'
	 * @param {string} [currency='BTC'] - Currency to use for price info. Options: BTC, ETH, LTC, DASH
	 * @returns {Promise&lt;*>}
	 */
	async getAlgo(algo, currency) {
		let endpoint = `/info/algos/${algo}`, params;
		if (currency) {
			params = {
				currency: currency
			}
		}
		let api = this.initAPI(endpoint, params);
		try {
			return (await api.get(endpoint)).data;
		} catch (err) {
			throw this.createError(endpoint, 'GET', err)
		}
	};
	/* ------------ Account API ----------- */
	//@ToDO: add v1 account API methods

	/* ------------ Rig API ----------- */
	/**
	 *
	 * @param  {object} options - input fields/query parameters
	 * @param {string} options.type - Rig type, eg: sha256, scrypt, x11, etc
	 * @param {Object} [options.minhours] - Filter the minimum hours of the rig *broken
	 * @param {number} [options.minhours.min]
	 * @param {number} [options.minhours.max]
	 * @param {Object} [options.maxhours] - Filter the maximum hours of the rig *broken
	 * @param {number} [options.maxhours.min]
	 * @param {number} [options.maxhours.max]
	 * @param {Object} [options.rpi] - 	Filter the RPI score
	 * @param {number} [options.rpi.min]
	 * @param {number} [options.rpi.max]
	 * @param {Object} [options.hash] - Filter the hashrate
	 * @param {number} [options.hash.min]
	 * @param {number} [options.hash.max]
	 * @param {string} [options.hash.type] - The hash type of min/max. defaults to "mh", possible values: [hash,kh,mh,gh,th]
	 * @param {Object} [options.price] - Filter the price
	 * @param {number} [options.price.min]
	 * @param {number} [options.price.max]
	 * @param {boolean} [options.offline=false] - To show or not to show offline rigs
	 * @param {boolean} [options.rented=false} - to show or not to show rented rigs
	 * @param {Object} [options.region] - Filter the region
	 * @param {string} [options.region.type] - Determines if this filter is an inclusive or exclusive filter.. possible options are [include,exclude]
	 * @param {boolean} [options.region.&lt;REGION>] - A region to include/exclude
	 * @param {number} [options.count=100] - Number of results to return, max is 100
	 * @param {number} [options.offset=0] - What result number to start with, returning COUNT results
	 * @param {string} [options.order="score"] - Field to order the results by. Default is "score", Possible values: [rpi,hash,price,minhrs,maxhrs,score]
	 * @param {string} [options.orderdir="asc"] - Order direction
	 * @returns {Promise&lt;Object>}
	 */
	async getRig(options) {
		let endpoint = '/rig';
		let params = {};
		if (options) {
			for (let opt in options) {
				params[opt] = options[opt]
			}
		}
		let api = this.initAPI(endpoint, params);
		try {
			return (await api.get(endpoint)).data;
		} catch (err) {
			throw this.createError(endpoint, 'GET', err)
		}
	}
	/**
	 * List my rigs
	 * @param {Object} [options]
	 * @param {string} [options.type] - Filter on algo -- see /info/algos
	 * @param {boolean} [options.hashrate=false] - Calculate and display hashrates
	 * @returns {Promise&lt;Object>}
	 */
	async getMyRigs(options) {
		let endpoint = '/rig/mine';
		let params = {};
		if (options) {
			for (let opt in options) {
				params[opt] = options[opt]
			}
		}
		let api = this.initAPI(endpoint, params);
		try {
			return (await api.get(endpoint)).data;
		} catch (err) {
			throw this.createError(endpoint, 'GET', err)
		}
	}
	/* ------------ Rental API ----------- */
	/**
	 * Lists rentals
	 * @param {Object} [options] - input fields/query parameters
	 * @param {string} [options.type=renter] - Type is one of [owner,renter] -- owner means rentals on your rigs, renter means rentals you purchased
	 * @param {string} [options.algo] - Filter by algo, see /info/algos
	 * @param {boolean} [options.history=false] - true = Show completed rentals, false = Active rentals
	 * @param {number} [options.rig] - Show rentals related to a specific rig ID
	 * @param {number} [options.start=0] - Start number (for pagination)
	 * @param {number} [options.limit=25] - Limit number (for pagination)
	 * @returns {Promise&lt;*>}
	 */
	async getRental(options) {
		let endpoint = '/rental';
		let params = {};
		if (options) {
			for (let opt in options) {
				params[opt] = options[opt]
			}
		}
		let api = this.initAPI(endpoint, params);
		try {
			return (await api.get(endpoint)).data;
		} catch (err) {
			throw this.createError(endpoint, 'GET', err)
		}
	}

	/* ------------ AXIOS INITIATION ----------- */
	/**
	 * Initialize a new instance of axios with desired endpoint
	 * @param {string} endpoint - the endpoint you wish to hit WITHOUT THE TRAILING SLASH; ex: /rig/14
	 * @param {Object} [params] - extra parameters to be passed along to the API
	 * @param {string} [version='v2'] - specify the mining rig rental api version you want to hit; defaults v2
	 * @returns {AxiosInstance}
	 */
	initAPI(endpoint, params, version = v2) {
		let nonce = this.generateNonce();
		let hmac_digest = this.createHMACSignature(endpoint, nonce);
		return (
			new axios.create({
				baseURL: `${this.baseURL}${version}/`,
				headers: {
					'x-api-key': this.key,
					'x-api-sign': hmac_digest,
					'x-api-nonce': nonce,
					'Access-Control-Allow-Origin': '*',
				},
				data: params
			})
		)
	};
	/**
	 * Create a SHA1 HMAC signature required for every mrr api call (see more at 'https://www.miningrigrentals.com/apidocv2')
	 * @param {string} endpoint - the endpoint your wish to hit without the trailing slash
	 * @param {number} nonce - a nonce that increments with each call
	 * @returns {string} hmacSig - the HMAC signature in hex
	 */
	createHMACSignature(endpoint, nonce) {
		const concatString = `${this.key}${nonce}${endpoint}`;
		return crypto.createHmac('sha1', this.secret).update(concatString).digest('hex');
	};
	/**
	 * Generate a nonce needed to build the HMAC signature
	 * @returns {number} - the current UNIX time + the previous Nonce
	 */
	generateNonce() {
		this.prevNonce += (new Date()).getTime();
		return this.prevNonce
	};

	/* ----------------- Utilities ----------------- */
	/**
	 * Utility function to provide users with in depth error messaging for debugging
	 * @param url - the api endpoint
	 * @param type - the type of request (GET, POST, PUT, etc)
	 * @param error - the caught error
	 * @returns {Error}
	 */
	createError = (url, type, error) => {
		var extraErrorText = "";

		if (error &amp;&amp; error.response){
			if (error.response.status)
				extraErrorText += error.response.status + " "
			if (error.response.statusText)
				extraErrorText += error.response.statusText + " | "
			if (error.response.data)
				extraErrorText += JSON.stringify(error.response.data)
		} else {
			extraErrorText = error.toString()
		}

		return new Error("Unable to " + type + " " + url + ": " + extraErrorText)
	}

}

export default MiningRigRentals
</code></pre>
  </article>
</section>

    


  </div>

  <br class="clear">

  <footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a>
  </footer>

  <script src="scripts/linenumber.js"></script>
  <script src="scripts/pagelocation.js"></script>

  
  
</body>
</html>
